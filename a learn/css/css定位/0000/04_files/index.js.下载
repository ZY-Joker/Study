define("index/index",["require","jquery","index/index","index/search","common/js/newcomer","common/js/advertisementReport"],function(t){function e(){$("#js-index-video").show(),$("#js-video-close").click(function(){$("#js-index-video").hide().find("#js-video").empty()})}var i=function(t,e){function i(){n(),o(),a()}function n(){u.html("");for(var t=0;v>t;t++){var e=f.eq(t);t<c.fristShowNum?(w[t]={left:e.position().left,top:e.position().top,zIndex:e.css("z-index"),width:e.width(),boxShadow:e.css("box-shadow")},c.isOpacity&&(w[t].opacity=e.css("opacity")),e.css("left",w[t].left)):e.css({left:w[c.fristShowNum-1].left}),x.push(e),u.append("<li></li>")}p=u.find(">li"),p.eq(0).addClass("active"),c.isClickImg&&f.eq(2).addClass("active")}function o(){function t(t,e){t.on("click",function(){j=parseInt($(this).index()-e),y&&I!=j&&(y=0,b=Math.abs(j-I),g=j>I?"next":"prev",b>Math.ceil(v/2)&&(b=v-b,g="next"==g?"prev":"next"),k=0,s(),b>1&&(d=setInterval(function(){y&&(s(),y=0,k>=b&&clearInterval(d))},50)))})}r.on("mouseover",function(){clearInterval(l)}).on("mouseleave",function(){a()}),c.isClickImg?(t(f,2),t(p,0)):t(p,0),h.on("click",function(){y&&(g="next",y=0,j==v-1?j=0:j++,s())}),m.on("click",function(){y&&(g="prev",y=0,0==j?j=v-1:j--,s())})}function a(){l=setInterval(function(){h.click()},c.autoRollingTime)}function s(){if("next"==g){for(var t=0;t<c.fristShowNum;t++){var e=w[t-1];0==t?x[t].fadeOut(c.moveSpeed):x[t].css({"z-index":e.zIndex,"box-shadow":e.boxShadow,opacity:e.opacity}).animate({left:e.left,top:e.top,width:e.width},c.moveSpeed)}var e=w[c.fristShowNum-1],i={left:e.left,top:e.top,width:e.width,"z-index":e.zIndex,"box-shadow":e.boxShadow,opacity:e.opacity};x.length!=c.fristShowNum?x[c.fristShowNum].css(i).fadeIn(c.moveSpeed,function(){y=1}):x[0].stop().css(i).fadeIn(c.moveSpeed,function(){y=1}),x.push(x.shift())}else{for(var n=0;n<c.fristShowNum;n++){var e=w[n+1];n==c.fristShowNum-1?x[n].css("z-index",0).fadeOut(c.moveSpeed):x[n].css({"z-index":e.zIndex,"box-shadow":e.boxShadow,opacity:e.opacity}).animate({left:e.left,top:e.top,width:e.width},c.moveSpeed)}var e=w[0];x[x.length-1].stop().css({left:e.left,top:e.top,width:e.width,"z-index":e.zIndex,"box-shadow":e.boxShadow,opacity:e.opacity}).fadeIn(c.moveSpeed,function(){y=1}),x.unshift(x.pop())}p.removeClass("active"),p.eq(j).addClass("active"),c.isClickImg&&(f.removeClass("active"),f.eq(j).addClass("active")),I=j,k++}var r=$(t),c={moveSpeed:100,autoRollingTime:8e3,fristShowNum:3,isDots:!0,isPrevNext:!0,isOpacity:!0,isClickImg:!1,dotsEvent:"click"};r.extend(c,e);var l,d,f=r.find(".banner-box >li"),u=r.find(".banner-dots"),p=u.find(">li"),m=r.find(".prev"),h=r.find(".next"),v=f.length,w=[],x=[],y=1,g="next",j=0,b=0,I=0,k=0;i()};i(".banner-bg"),i(".scroll_div",{isOpacity:!0,moveSpeed:100,autoRollingTime:5e3,dotsEvent:"mouseover",fristShowNum:5,isClickImg:!0});var n,o=0,a=0,s=function(){var t=6500,e=$(".star-item li"),i=e.length;if(a=Math.ceil(i/4),i%4>0&&i>4)for(var s=0;4-i%4>s;s++)$(".star-item").append(e.eq(s).clone());if(i=$(".star-item li").length,i>=8){$(".star-item").css("width",300*(i+4)+"px");for(var s=0;4>s;s++)$(".star-item").append(e.eq(s).clone())}else $(".star-item").css("width",300*i+"px");n=setInterval(function(){o++,r()},t),$(".js-star-item-btn li").on("click",function(){clearInterval(n),n=null,o=$(this).index(),r(),n=setInterval(function(){o++,r()},t)}),e.on("mouseover",function(){clearInterval(n),n=null}).on("mouseout",function(){n=setInterval(function(){o++,r()},t)})},r=function(){o>a&&(o=a);var t=1200*o;$(".slide-draw").show(),$(".star-item").animate({left:"-"+t+"px"},1500,function(){$(".slide-draw").hide(),o==a&&(o=0,$(".star-item").css({left:"0px"})),$(".js-star-item-btn li").removeClass("on").eq(o).addClass("on")})};$(".js-star-item-btn").length&&s();var c=navigator.userAgent.toLowerCase(),l=!!c.match(/ipad/i);$("body").on("click",".js-play",function(){l?t(["/static/lib/jwplayer/1.0.0/webjwplayer.js"],function(){jwplayer("js-video").setup({startparam:"start",autostart:!0,width:"900",height:"500",videotitile:"实战课程_慕课网",file:"//video.mukewang.com/sz.mp4",events:{onReady:function(){this.play()}}})}):t(["common/js/player"],function(t){t.init({id:"js-video",url:"//video.mukewang.com/sz.mp4",videotitile:"实战课程_慕课网",width:"800",height:"500",events:{onReady:function(){this.play()}}})}),e()}),!function(){$(document).on("click","[data-track]",function(){$.ajax({url:"//www.imooc.com/index/clickuserlog",type:"GET",dataType:"jsonp",data:{track:$(this).attr("data-track"),r:(new Date).getTime()}})})}();var d=function(){var t=$(".scroll_div .banner-box").find("li");t.each(function(e){var i=$(t[e]).find("p");i.text().length>225&&i.html(i.text().slice(0,225)+"...")})};d();var f=function(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return e=10>e?"0"+e:e,i=10>i?"0"+i:i,n=10>n?"0"+n:n,e+":"+i+":"+n},u=function(t,e){t--,$(e).html(f(t)),t>0?setTimeout(function(){u(t,e)},1e3):clearInterval(u)};$(function(){$.each($(".js-sales-timer"),function(t,e){var i=$(e).data("timer");i&&u(i,e)});var t=!1;$("body").on("click",".js-course-collect",function(){var e=this;if(!OP_CONFIG.isLogin)return $("#js-signin-btn").trigger("click"),!1;if(t)return!1;t=!0;var i={course_id:$(this).attr("data-cid"),type:$(this).attr("data-type")};return $.post("/user/coursefollow",i,function(n){if(t=!1,0==n.result){var o=(1==i.type?"取消收藏成功":"收藏成功",Number($("#follow_count").html()));0/0!=o?0==i.type?$("#follow_count").html(o+1):window.location.reload(!0):$("#follow_count").html(0==i.type?1:0),0==i.type&&$(e).addClass("red").find("span").html("已收藏")}else-555==n.result&&$(e).addClass("red").find("span").html("已收藏")},"json"),!1}).on("click",".js-course-acart",function(){var t=$(this);if(!OP_CONFIG.isLogin)return $("#js-signin-btn").trigger("click"),!1;var e=$(this).attr("data-cid"),i="1",n={type_id:e,type:i};return $.ajax({url:"//order.imooc.com/pay/addtocart",dataType:"jsonp",data:n,jsonp:"jsonpcallback",success:function(e){if("0"==e.result){zhuge.track("添加购物车",{"课程名称":t.parents(".shizhan-intro-box").find(".shizan-name").text(),"价格":t.parents(".shizhan-intro-box").find(".course-card-price").text().replace(/￥/,"")}),$.alert("添加购物车成功");var i=parseInt($(".js-cart-num").attr("data-cartnum")),n=parseInt($(".js-cart-num").attr("data-ordernum"));$(".js-cart-num").attr("data-prevnum",parseInt(i)),$(".js-cart-num").html(parseInt(i+1+n)).attr("data-cartnum",parseInt(i+1)).show()}else $.alert(e.msg,{icon:"error"});b=!1}}),!1})}),$(function(){var t=$(".js-line"),e=t.find(".content").height();72>e?t.find(".wrap").addClass("middle"):t.find(".wrap").css("opacity",1)})});